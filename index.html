<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TenerifeBeachRank - Las mejores playas hoy</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f0f9ff; }
        .beach-card { transition: transform 0.2s; }
        .beach-card:hover { transform: translateY(-5px); }
    </style>
</head>
<body class="pb-20">

    <header class="bg-white p-4 shadow-sm flex justify-between items-center sticky top-0 z-50">
        <h1 class="text-xl font-bold text-cyan-600 flex items-center gap-2">
            ğŸŒŠ TenerifeBeachRank
        </h1>
        <span class="text-xs bg-gray-100 px-2 py-1 rounded text-gray-500" id="current-date"></span>
    </header>

    <div class="relative h-48 bg-cyan-500 overflow-hidden">
        <img src="https://images.unsplash.com/photo-1589332560533-5c026ec17029?auto=format&fit=crop&q=80&w=800" class="w-full h-full object-cover opacity-60">
        <div class="absolute inset-0 flex flex-col justify-center px-6">
            <h2 class="text-white text-2xl font-bold leading-tight">Â¿A quÃ© playa ir hoy?</h2>
            <p class="text-cyan-50 text-sm mt-1">Ranking diario basado en viento, sol y marea.</p>
        </div>
    </div>

    <main class="px-4 -mt-6 relative z-10">
        <div id="beach-list" class="space-y-4">
            <p class="text-center p-10 text-gray-500 italic">Cargando datos en tiempo real...</p>
        </div>
    </main>

    <nav class="fixed bottom-0 w-full bg-white border-t border-gray-200 p-3 flex justify-around text-xs text-gray-400">
        <div class="text-cyan-600 font-bold">ğŸ† Ranking</div>
        <div>ğŸ“ Mapa</div>
        <div>ğŸ”” Alertas</div>
    </nav>

    <script>
        document.getElementById('current-date').innerText = new Date().toLocaleDateString('es-ES', { day: 'numeric', month: 'short' });

        async function loadBeaches() {
            try {
                // Truco: AÃ±adimos un timestamp para evitar que el mÃ³vil guarde datos viejos
                const response = await fetch('data.json?v=' + new Date().getTime());
                const beaches = await response.json();
                const container = document.getElementById('beach-list');
                container.innerHTML = '';

                beaches.forEach((beach, index) => {
                    const isTop = index === 0;
                    const card = `
                        <div class="beach-card bg-white rounded-2xl shadow-lg border-l-4 ${isTop ? 'border-green-400' : 'border-cyan-400'} p-4 relative">
                            ${isTop ? '<span class="absolute top-0 right-0 bg-green-400 text-white text-[10px] font-bold px-3 py-1 rounded-bl-xl">#1 MEJOR OPCIÃ“N</span>' : ''}
                            
                            <div class="flex justify-between items-start">
                                <div>
                                    <h3 class="text-lg font-bold text-gray-800">${beach.nombre}</h3>
                                    <p class="text-xs text-gray-400 uppercase">${beach.municipio}</p>
                                </div>
                                <div class="text-right">
                                    <div class="text-2xl font-black text-cyan-600">${beach.score}<span class="text-xs text-gray-300">/10</span></div>
                                </div>
                            </div>

                            <div class="grid grid-cols-3 gap-2 mt-4 text-center border-t border-gray-50 pt-4">
                                <div><span class="block text-xl">ğŸŒ¡ï¸</span><span class="text-xs font-bold text-gray-700">${beach.clima.t_max}ÂºC</span></div>
                                <div><span class="block text-xl">ğŸ’¨</span><span class="text-xs font-bold text-gray-700">${beach.clima.viento}km/h</span></div>
                                <div><span class="block text-xl">â˜€ï¸</span><span class="text-xs font-bold text-gray-700 truncate">${beach.clima.cielo}</span></div>
                            </div>
                            
                            <div class="mt-3 flex flex-wrap gap-1">
                                ${beach.detalles.map(d => `<span class="text-[9px] bg-blue-50 text-blue-500 px-2 rounded-full border border-blue-100">${d}</span>`).join('')}
                            </div>
                        </div>
                    `;
                    container.innerHTML += card;
                });
            } catch (error) {
                document.getElementById('beach-list').innerHTML = `<p class="text-center text-red-400">Error cargando ranking. Intenta recargar.</p>`;
            }
        }
        loadBeaches();
    </script>
</body>
</html>
